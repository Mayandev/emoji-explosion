{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/CanvasWriter.js","webpack:///./src/js/Particle.js","webpack:///./src/js/Explosion.js","webpack:///./src/main.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","CanvasWriter","canvas","this","context","getContext","emojiCanvas","explosion","elapsed","opacity","eachParticle","particle","draw","x","y","z","rotationRad","reset","clearRect","width","height","translate","setTransform","globalAlpha","Math","max","canvasToDrawFrom","radians","coordX","coordY","move","rotate","targetWidth","targetHeight","drawImage","RADIANS_360_DEGREES","PI","Particle","originX","originY","accelerationY","initialVelocity","randomBetween","initialAngle","initialVelocityX","cos","initialVelocityY","sin","initialVelocityZ","initialRotation","rotationVelocity","min","random","pow","cachedCurrentVelocityT","cachedCurrentVelocity","currentVelocity","emojiCanvases","particles","makeParticles","counts","push","randomMojeCanvas","length","idx","floor","fn","sortBy","sortedParticles","forEach","by","sort","a","b","aCriterion","bCriterion","startTime","performance","now","easeInOutQuad","easeOpacity","mojeCanvases","doSecretEmojiCanvas","txt","singleMojeCanvas","document","createElement","singleMojeContext","font","measureText","fillText","splosions","cw","doit","filter","splode","isOver","clear","boom","write","requestAnimationFrame","addEventListener","e","canvasDom","getElementById","input","inputHeight","clientHeight","documentElement","clientWidth","setAttribute","localStorage","lastEmoje","refreshMojeCanvases","split","map","moje","timerFun","timer","setTimeout","console","log","run","setup","clearTimeout"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","export class CanvasWriter {\n  constructor(canvas) {\n    this.canvas = canvas;\n    this.context = canvas.getContext(\"2d\");\n  }\n\n  write(emojiCanvas, explosion) {\n    // const elapsed = (explosion)\n    const elapsed = (explosion.elapsed()) * .001;\n    this.opacity(explosion.opacity(elapsed));\n\n    explosion.eachParticle((particle) => {\n      this.draw(particle.emojiCanvas, particle.x(elapsed), particle.y(elapsed), particle.z(elapsed), particle.rotationRad(elapsed));\n      this.reset();\n    }, \"z\", elapsed)\n  }\n\n  clear() {\n    // 指定矩形区域内（以 点 (x, y) 为起点，范围是(width, height) ）所有像素变成透明\n    this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n  }\n\n  move(x, y) {\n    // 将 canvas 按原始 x点的水平方向、原始的 y点垂直方向进行平移变换\n    this.context.translate(x + this.canvas.width / 2, y + this.canvas.height / 2);\n  }\n\n  reset() {\n    // setTransfrom 分别设置水平倾斜、缩放，垂直倾斜、缩放，水平移动，垂直移动\n    this.context.setTransform(1, 0, 0, 1, 0, 0);\n  }\n\n  opacity(opacity) {\n    this.context.globalAlpha = Math.max(opacity, 0);\n  }\n\n  draw(canvasToDrawFrom, x, y, z, radians) {\n    const coordX = x;\n    const coordY = y;\n\n    this.move(coordX, coordY);\n    this.context.rotate(radians);\n\n    const targetWidth = canvasToDrawFrom.width * (0.1 + z);\n    const targetHeight = canvasToDrawFrom.height * (0.1 + z);\n\n    this.context.drawImage(canvasToDrawFrom,\n      0 - (targetWidth / 2),\n      0 - (targetHeight / 2),\n      targetWidth,\n      targetHeight);\n  }\n\n}","\nconst DEGREES_IN_CIRCLE = 360;\n// 弧度\nconst RADIANS_360_DEGREES = DEGREES_IN_CIRCLE * (Math.PI/180);\n\n\nexport class Particle {\n  constructor(originX, originY, emojiCanvas) {\n    this.emojiCanvas = emojiCanvas;\n    this.originX = originX;\n    this.originY = originY;\n\n    this.accelerationY = 360;\n\n    const UP = -360;\n\n    // 初始加速度\n    const initialVelocity = this.randomBetween(100, 200);\n    // 初始弧度\n    const initialAngle = this.randomBetween(0, RADIANS_360_DEGREES);\n\n    // x 方向的加速度\n    this.initialVelocityX = initialVelocity * Math.cos(initialAngle);\n    // y 方向的加速度\n    this.initialVelocityY = UP + initialVelocity * Math.sin(initialAngle);\n    // z 方向加速度（大小）\n    this.initialVelocityZ = this.randomBetween(-0.1, .1);\n\n    // 初始角度\n    this.initialRotation = this.randomBetween(0, RADIANS_360_DEGREES);\n    // 旋转加速度\n    this.rotationVelocity = this.randomBetween(-2, 2);\n  }\n\n  randomBetween(min, max) {\n    return Math.random() * (max - min) + min;\n  }\n\n  rotationRad(t) {\n    return this.initialRotation + this.rotationVelocity * t;\n  }\n\n  y(t) {\n    // 初始坐标 + y + 加速度\n    return this.originY + this.initialVelocityY * t + (this.accelerationY / 2) * Math.pow(t, 2);\n  }\n\n  x(t) {\n    return this.originX + this.initialVelocityX * t;\n  }\n\n  z(t) {\n    if (this.cachedCurrentVelocityT === t) {\n      return this.cachedCurrentVelocity;\n    }\n    else {\n      // 存储\n      const currentVelocity = this.initialVelocityZ * t;\n      //cache it\n      this.cachedCurrentVelocity = currentVelocity;\n      this.cachedCurrentVelocityT = t;\n      //do it\n      return currentVelocity;\n    }\n  }\n}","import {Particle} from './Particle';\n\nexport class Explosion {\n  constructor(originX, originY, emojiCanvases) {\n    this.emojiCanvases = emojiCanvases;\n    this.particles = [];\n    this.makeParticles(50, originX, originY);\n  }\n\n  /**\n   * 制造爆炸粒子\n   * @param {*} counts 粒子树木\n   * @param {*} originX 坐标x\n   * @param {*} originY 坐标y\n   */\n  makeParticles(counts, originX, originY) {\n    for (let i = 0; i < counts; i++) {\n      this.particles.push(new Particle(originX, originY, this.randomMojeCanvas()));\n    }\n  }\n\n  randomMojeCanvas() {\n    const length = this.emojiCanvases.length;\n    const idx = Math.floor(Math.random() * length);\n    return this.emojiCanvases[idx];\n  }\n\n  // 遍历每个粒子\n  eachParticle(fn, sortBy, t) {\n    this.sortedParticles(sortBy, t).forEach(fn);\n  }\n\n  sortedParticles(by, t) {\n    return this.particles.sort(function compare(a, b) {\n      const aCriterion = a[by](t);\n      const bCriterion = b[by](t);\n      if (aCriterion > bCriterion) {\n        return 1\n      }\n      if (aCriterion < bCriterion) {\n        return -1;\n      }\n      return 0;\n    })\n  }\n\n  run(){\n    this.startTime = performance.now();\n  }\n\n  elapsed() {\n    return performance.now() - this.startTime\n  }\n\n  isOver() {\n    return this.elapsed() >= 2500;\n  }\n\n\n  opacity() {\n    const elapsed = this.elapsed();\n\n    if (elapsed <= 250) {\n      return this.easeInOutQuad(elapsed, 0.0, 1.0, 250)\n    }\n    else if (elapsed <= 1000)\n      return 1;\n    else if (elapsed >= 2000)\n      return 0;\n    else\n      return this.easeOpacity(elapsed - 1000)\n  }\n\n\n  easeOpacity(t){\n    return this.easeInOutQuad(t, 1.0, -1.0, 1000)\n  }\n\n  // penner\n  easeInOutQuad(t, b, c, d) {\n    if ((t/=d/2) < 1) return c/2*t*t + b;\n    return -c/2 * ((--t)*(t-2) - 1) + b;\n  }\n\n}","import './css/index.css'\nimport { CanvasWriter } from './js/CanvasWriter';\nimport { Explosion } from './js/Explosion';\nlet mojeCanvas = null\nlet mojeCanvases = null;\nlet mojies = null;\n\n\nfunction doSecretEmojiCanvas(txt) {\n  const height = 256;\n\n  const singleMojeCanvas = document.createElement(\"canvas\");\n  singleMojeCanvas.height = height;\n  singleMojeCanvas.width = height;\n\n  const singleMojeContext = singleMojeCanvas.getContext(\"2d\")\n\n  // singleMojeContext.clearRect(0, 0, singleMojeCanvas.width, singleMojeCanvas.height);\n\n  singleMojeContext.translate(singleMojeCanvas.width / 2, singleMojeCanvas.height / 2);\n\n  singleMojeContext.font = `${height}px Georgia`;\n  const { width } = singleMojeContext.measureText(txt);\n  singleMojeContext.fillText(txt, 0 - (width / 2), 0 + (height / 2.35));\n\n  // singleMojeContext.setTransform(1, 0, 0, 1, 0, 0);\n\n  return singleMojeCanvas\n}\n\n\nlet splosions = []\nlet doingIt = false\nlet cw = null;\n\nfunction doit() {\n  splosions = splosions.filter((splode) => !splode.isOver());\n\n  if (splosions.length) {\n    cw.clear()\n    splosions.forEach((boom) => {\n      cw.write(mojeCanvas, boom)\n    })\n    requestAnimationFrame(doit)\n  }\n}\n\nfunction setup(x, y) {\n  const boom = new Explosion(x, y, mojeCanvases);\n  boom.run();\n\n  splosions.push(boom)\n\n  if (!doingIt) {\n    requestAnimationFrame(doit);\n  }\n\n}\ndocument.addEventListener(\"DOMContentLoaded\", (e) => {\n\n  let canvasDom = document.getElementById(\"real-one\");\n\n  cw = new CanvasWriter(canvasDom);\n\n  const input = document.getElementById(\"moje\")\n  const inputHeight = input.clientHeight;\n  const defaultEmoji = \"🚀 🌟 💖 😎 🤩 🥳 🥰 🌈\";\n  const clientHeight = document.documentElement.clientHeight;\n  const clientWidth = document.documentElement.clientWidth;\n  canvasDom.setAttribute(\"height\", clientHeight - inputHeight);\n  canvasDom.setAttribute(\"width\", clientWidth);\n\n  if (!input.value.length) {\n    input.z = localStorage.lastEmoje || '';\n  }\n\n  const refreshMojeCanvases = () => {\n    mojeCanvases = input.value.length > 0 ? input.value.split(/\\s+|\\ /).map((moje) => doSecretEmojiCanvas(moje)) : defaultEmoji.split(' ').map((moje) => doSecretEmojiCanvas(moje));\n  }\n\n  refreshMojeCanvases();\n\n  const persistInputValue = function (e) {\n    localStorage.lastEmoje = this.value;\n    refreshMojeCanvases();\n  }\n\n\n  input.addEventListener(\"blur\", persistInputValue);\n\n  let x, y;\n  function timerFun() {\n\n    //要执行的操作\n\n    var timer = setTimeout(function () {\n      x = Math.random() * clientWidth - clientWidth / 2;\n      y = Math.random() * clientHeight - clientHeight / 2;\n      console.log(x, y);\n\n      setup(x, y)\n      clearTimeout(timer);\n      timer = null;\n\n      timerFun();\n\n\n    }, 1000 + Math.random() * 1000)\n\n  }\n  timerFun();\n})"],"sourceRoot":""}